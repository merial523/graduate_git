{% extends base_template %}
{% block content %}
<div class="container mt-5">
    <h2 class="mb-4">ğŸ‘¤ ãƒã‚¤ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</h2>
    
    <div class="card shadow-sm mb-5">
        <div class="card-body">
            <!-- 
              d-flex: æ¨ªä¸¦ã³ã«ã™ã‚‹ 
              align-items-start: ä¸Šæƒãˆã«ã™ã‚‹
              flex-column flex-md-row: ã‚¹ãƒãƒ›ã§ã¯ç¸¦ã€PCã§ã¯æ¨ªä¸¦ã³ã«ã™ã‚‹
            -->
            <div class="d-flex flex-column flex-md-row align-items-start">
                
                <!-- å†™çœŸã‚¨ãƒªã‚¢ï¼ˆå¹…ã‚’100pxã§å›ºå®šã—ã¦ã€çµ¶å¯¾ã«é‡ãªã‚‰ãªã„ã‚ˆã†ã«ã™ã‚‹ï¼‰ -->
                <div class="text-center mb-3 mb-md-0 me-md-4" style="flex: 0 0 100px;">
                    {% if request.user.avatar %}
                        <img src="{{ request.user.avatar.url }}" class="rounded-circle border" style="width: 100px; height: 100px; object-fit: cover;">
                    {% else %}
                        <div class="bg-light border rounded-circle d-flex align-items-center justify-content-center mx-auto" style="width: 100px; height: 100px; color: #adb5bd; font-size: 0.8em;">
                            No Image
                        </div>
                    {% endif %}
                </div>
                
                <!-- æ–‡å­—æƒ…å ±ã‚¨ãƒªã‚¢ï¼ˆflex-grow-1ã§æ®‹ã‚Šã®å¹…ã‚’ã™ã¹ã¦ä½¿ã†ï¼‰ -->
                <div class="flex-grow-1 w-100">
                    <h3 class="fw-bold mb-1">{{ request.user.username }}</h3>
                    <p class="text-muted small mb-3">ä¼šå“¡ç•ªå·: {{ request.user.member_num }}</p>
                    
                    <!-- å‚™è€ƒæ¬„ï¼ˆã‚«ãƒ¼ãƒ‰ã®ä¸­ã®ã•ã‚‰ã«å°ã•ãªæ ã¨ã—ã¦è¡¨ç¤ºï¼‰ -->
                    <div class="p-3 rounded border bg-light w-100">
                        <label class="fw-bold small text-muted d-block mb-1">å‚™è€ƒãƒ»è‡ªå·±ç´¹ä»‹</label>
                        <div style="word-break: break-all;"> <!-- é•·ã„æ–‡ç« ã§ã‚‚æ”¹è¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ -->
                            {{ request.user.remarks|default:"æœªè¨˜å…¥"|linebreaksbr }}
                        </div>
                    </div>
                    
                    <div class="mt-3">
                        <a href="{% url 'prof:profile_edit' %}" class="btn btn-outline-primary btn-sm">
                            âš™ï¸ ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’ç·¨é›†
                        </a>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- ãƒãƒƒã‚¸ã‚¨ãƒªã‚¢ï¼ˆã“ã“ã¯å¤‰æ›´ãªã—ï¼‰ -->
    <h4 class="fw-bold mb-3">ğŸ–ï¸ ç²å¾—ç§°å·</h4>
    <div class="row row-cols-2 row-cols-sm-3 row-cols-md-5 g-3">
        {% for status in passed_statuses %}
            {% if status.exam.badge %}
                <div class="col">
                    <div class="card h-100 text-center border-0 bg-light py-2">
                        <div class="mb-1">
                            {% if status.exam.badge.icon %}
                                <img src="{{ status.exam.badge.icon.url }}" style="height: 50px; width: 50px; object-fit: contain;">
                            {% else %}
                                <div style="font-size: 30px;">ğŸ–ï¸</div>
                            {% endif %}
                        </div>
                        <p class="small fw-bold mb-0">{{ status.exam.badge.name }}</p>
                    </div>
                </div>
            {% endif %}
        {% endfor %}
    </div>
</div>
{% endblock %}