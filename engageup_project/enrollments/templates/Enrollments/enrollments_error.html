{% extends base_template %}

{% block content %}
<div class="container mt-5">
    <div class="card border-0 shadow-lg mx-auto" style="max-width: 850px; border-radius: 12px; overflow: hidden;">
        
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆWindowsã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦é¢¨ï¼‰ -->
        <div style="background-color: #333; padding: 10px 20px; display: flex; align-items: center; justify-content: space-between;">
            <div style="display: flex; gap: 8px;">
                <div style="width: 12px; height: 12px; background-color: #ff5f56; border-radius: 50%;"></div>
                <div style="width: 12px; height: 12px; background-color: #ffbd2e; border-radius: 50%;"></div>
                <div style="width: 12px; height: 12px; background-color: #27c93f; border-radius: 50%;"></div>
            </div>
            <span style="color: #bbb; font-family: sans-serif; font-size: 0.85em;">Django Debug Console - AI Generation</span>
            <div></div>
        </div>

        <div class="card-body" style="background-color: #fcfcfc; padding: 30px;">
            <h4 class="text-danger mb-4" style="font-weight: bold;">âš ï¸ AIç”Ÿæˆãƒ—ãƒ­ã‚»ã‚¹ã§ä¾‹å¤–ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ</h4>
            
            <p class="text-muted mb-2">ã‚¨ãƒ©ãƒ¼ãƒ»ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã®æ¦‚è¦:</p>

            <!-- â˜… ã‚¿ãƒ¼ãƒŸãƒŠãƒ«é¢¨è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
            <div style="background-color: #1e1e1e; color: #d4d4d4; padding: 25px; border-radius: 6px; font-family: 'Consolas', 'Monaco', 'Courier New', monospace; font-size: 0.95em; line-height: 1.6; box-shadow: inset 0 0 10px rgba(0,0,0,0.5); overflow-x: auto;">
                <div style="border-bottom: 1px solid #333; margin-bottom: 10px; padding-bottom: 5px; color: #569cd6;">
                    $ python manage.py run_ai_generation --exam_id={{ exam_id }}
                </div>
                
                <span style="color: #ce9178;">[LOG]</span> æ•™æãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ä¸­... OK<br>
                <span style="color: #ce9178;">[LOG]</span> Gemini APIã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ä¸­...<br>
                <span style="color: #f44336; font-weight: bold;">[CRITICAL ERROR]</span> ä»¥ä¸‹ã®åŸå› ã§å‡¦ç†ãŒä¸­æ–­ã•ã‚Œã¾ã—ãŸ:<br>
                <br>
                <div style="color: #f48771; padding-left: 20px; border-left: 3px solid #f44336;">
                    {{ error }}
                </div>
                <br>
                <span style="color: #569cd6;">>>> ã‚·ã‚¹ãƒ†ãƒ ã¯å¾…æ©ŸçŠ¶æ…‹ã«æˆ»ã‚Šã¾ã—ãŸã€‚è¨­å®šã‚’ç¢ºèªã—ã¦å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚</span>
            </div>

            <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ -->
            <div class="mt-5 d-flex flex-wrap gap-2">
                {% if exam_id %}
                    <a href="{% url 'enrollments:exam_edit' exam_id %}" class="btn btn-primary" style="padding: 10px 25px; font-weight: bold; border-radius: 6px;">
                        ğŸ“ æ•™æã‚’å†è¨­å®šã™ã‚‹
                    </a>
                {% endif %}
                <a href="javascript:history.back()" class="btn btn-outline-secondary" style="padding: 10px 25px; border-radius: 6px;">æˆ»ã‚‹</a>
                <a href="{% url 'enrollments:exam_list' %}" class="btn btn-link" style="color: #666;">æ¤œå®šä¸€è¦§ã«æˆ»ã‚‹</a>
            </div>
        </div>
    </div>
</div>

<style>
    /* èƒŒæ™¯ã‚’å°‘ã—æš—ãã—ã¦ã‚«ãƒ¼ãƒ‰ã‚’éš›ç«‹ãŸã›ã‚‹ */
    body { background-color: #f0f2f5; }
    
    /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºï¼ˆã‚¿ãƒ¼ãƒŸãƒŠãƒ«é¢¨ï¼‰ */
    div::-webkit-scrollbar { width: 8px; height: 8px; }
    div::-webkit-scrollbar-thumb { background: #444; border-radius: 10px; }
    div::-webkit-scrollbar-track { background: #222; }
</style>
{% endblock %}