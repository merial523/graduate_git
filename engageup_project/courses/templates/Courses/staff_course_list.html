{% extends base_template %}
{% block content %}
<div class="container px-3 py-4">

    <h5 class="fw-bold mb-3 text-center">üìñ ÂèóË¨õÂèØËÉΩ„Å™Á†î‰øÆ‰∏ÄË¶ß</h5>

    <div class="accordion" id="courseAccordion">
        {% for course in courses %}
        <div class="accordion-item mb-3 border-0 rounded-4 shadow-sm overflow-hidden">

            <h2 class="accordion-header">
                <button
                    class="accordion-button collapsed d-flex flex-column align-items-start gap-1 px-3 py-3 bg-white"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#course{{ course.id }}">

                    <span class="fw-semibold text-truncate w-100">
                        {{ course.subject }}
                    </span>

                    <div class="d-flex justify-content-between align-items-center w-100">
                        <small class="text-muted">
                            ÂÖ® {{ course.modules.count }} Á†î‰øÆ
                        </small>
                        <span class="badge bg-primary-subtle text-primary rounded-pill">
                            Èñã„Åè
                        </span>
                    </div>
                </button>
            </h2>

            <div id="course{{ course.id }}" class="accordion-collapse collapse"
                 data-bs-parent="#courseAccordion">
                <div class="accordion-body p-0">

                    <div class="list-group list-group-flush">
                        {% for module in course.modules.all %}
                            {% if module.is_active %}
                            <a href="{% url 'courses:training_detail' module.id %}"
                               class="list-group-item list-group-item-action d-flex flex-column gap-1 px-3 py-3">

                                <div class="d-flex align-items-center gap-2">
                                    <!-- ‚òÖ „Ç¢„Ç§„Ç≥„É≥„ÅÆÂá∫„ÅóÂàÜ„ÅëÔºöÂÆå‰∫ÜÊ∏à„Åø„Å™„ÇâÁ∑ë„ÅÆ„ÉÅ„Çß„ÉÉ„ÇØ„ÄÅÊú™ÂÆå‰∫Ü„Å™„ÇâÈùí„ÅÆÂÜçÁîü„Éû„Éº„ÇØ -->
                                    {% if module.id in completed_module_ids %}
                                        <i class="bi bi-check-circle-fill text-success fs-5"></i>
                                        <span class="fw-medium text-secondary">
                                            {{ module.title }}
                                        </span>
                                    {% else %}
                                        <i class="bi bi-play-circle-fill text-primary fs-5"></i>
                                        <span class="fw-medium text-dark">
                                            {{ module.title }}
                                        </span>
                                    {% endif %}
                                </div>

                                <div class="d-flex justify-content-between align-items-center">
                                    <small class="text-muted">
                                        Êé®ÂÆö {{ module.estimated_time }}ÂàÜ
                                    </small>
                                    
                                    <!-- ‚òÖ „Éê„ÉÉ„Ç∏„ÅÆÂá∫„ÅóÂàÜ„ÅëÔºöÂÆå‰∫ÜÊ∏à„Åø„Å™„Çâ„ÄåÂÆå‰∫Ü„Äç„ÄÅÊú™ÂÆå‰∫Ü„Å™„Çâ„Äå‚ñ∂„Äç -->
                                    {% if module.id in completed_module_ids %}
                                        <span class="badge bg-success-subtle text-success border border-success border-opacity-25 rounded-pill">
                                            ‚úÖ ÂÆå‰∫Ü
                                        </span>
                                    {% else %}
                                        <span class="badge bg-light text-dark border">
                                            ‚ñ∂
                                        </span>
                                    {% endif %}
                                </div>
                            </a>
                            {% endif %}
                        {% empty %}
                            <div class="px-3 py-4 text-center text-muted small">
                                ÁèæÂú®„ÄÅ„Åì„ÅÆ„Ç≥„Éº„Çπ„Å´ÂÖ¨Èñã‰∏≠„ÅÆÁ†î‰øÆ„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ
                            </div>
                        {% endfor %}
                    </div>

                </div>
            </div>

        </div>
        {% empty %}
        <p class="text-center py-5 text-muted small">
            ÂèóË¨õ„Åß„Åç„Çã„Ç≥„Éº„Çπ„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ
        </p>
        {% endfor %}
    </div>

</div>

<style>
    /* „Ç¢„Ç≥„Éº„Éá„Ç£„Ç™„É≥ÂÜÖ„ÅÆ„ÄåÂÆå‰∫Ü„Äç„Åó„Åü„Ç¢„Ç§„ÉÜ„É†„ÇíÂ∞ë„ÅóËñÑ„Åè„Åô„ÇãÊºîÂá∫Ôºà‰ªªÊÑèÔºâ */
    .text-secondary {
        opacity: 0.8;
    }
    /* „É™„É≥„ÇØ„ÅÆ„Éõ„Éê„ÉºÊôÇ */
    .list-group-item-action:hover {
        background-color: #f8f9fa;
    }
</style>
{% endblock %}