{% extends base_template %}
{% block content %}
<div class="container mt-5">
    <h2 class="fw-bold mb-4">ğŸ“– å—è¬›å¯èƒ½ãªç ”ä¿®ä¸€è¦§</h2>

    <div class="accordion shadow-sm" id="courseAccordion">
        {% for course in courses %}
        <div class="accordion-item border-0 mb-2 shadow-sm rounded-3 overflow-hidden">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed fw-bold py-3" type="button" data-bs-toggle="collapse" data-bs-target="#course{{ course.id }}">
                    <div class="d-flex justify-content-between w-100 align-items-center">
                        <span>{{ course.subject }}</span>
                        <span class="badge bg-secondary-subtle text-secondary rounded-pill fw-normal me-3" style="font-size: 0.7em;">
                            å…¨ {{ course.modules.count }} ç ”ä¿®
                        </span>
                    </div>
                </button>
            </h2>
            <div id="course{{ course.id }}" class="accordion-collapse collapse" data-bs-parent="#courseAccordion">
                <div class="accordion-body p-0">
                    <div class="list-group list-group-flush">
                        {% for module in course.modules.all %}
                            {% if module.is_active %}
                            <a href="{% url 'courses:training_detail' module.id %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center py-3 px-4 border-0 border-bottom">
                                <div>
                                    <i class="bi bi-play-circle me-2 text-primary"></i>
                                    {{ module.title }}
                                </div>
                                <small class="text-muted">{{ module.estimated_time }}åˆ†</small>
                            </a>
                            {% endif %}
                        {% empty %}
                            <div class="p-4 text-center text-muted small">ç¾åœ¨ã€ã“ã®ã‚³ãƒ¼ã‚¹ã«å…¬é–‹ä¸­ã®ç ”ä¿®ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
        {% empty %}
        <p class="text-center py-5 text-muted">å—è¬›ã§ãã‚‹ã‚³ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
        {% endfor %}
    </div>
</div>

<style>
    /* ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’èª¿æ•´ */
    .accordion-button:not(.collapsed) {
        background-color: #f8f9fa;
        color: #000;
    }
    .accordion-button:focus {
        box-shadow: none;
        border-color: rgba(0,0,0,.125);
    }
</style>
{% endblock %}